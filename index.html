<!DOCTYPE html>
<html>
<head>
    <title>CGPA Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <h2>CGPA Calculator</h2>

    <label>Number of Subjects</label>
    <input type="number" id="numSubjects" min="1" value="3">

    <div id="subjects"></div>

    <label>Previous CGPA</label>
    <input type="number" id="prevCGPA" step="0.01">

    <label>Previous Semester Credits</label>
    <input type="number" id="prevCredits" step="0.1">

    <button onclick="calculateCGPA()">Calculate CGPA</button>

    <div class="result" id="result"></div>
</div>

<script>
const subjectsDiv = document.getElementById("subjects");
const numSubjectsInput = document.getElementById("numSubjects");

function generateSubjects() {
    subjectsDiv.innerHTML = "";
    let n = parseInt(numSubjectsInput.value);

    for (let i = 1; i <= n; i++) {
        subjectsDiv.innerHTML += `
            <div class="subject">
                <select id="grade${i}">
                    <option value="">Grade</option>
                    <option value="O">O</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                </select>

                <input type="number" id="credits${i}" placeholder="Credits" step="0.1">
            </div>
        `;
    }
}

numSubjectsInput.addEventListener("change", generateSubjects);
window.onload = generateSubjects;

function calculateCGPA() {
    let n = parseInt(numSubjectsInput.value);
    let totalWeighted = 0;
    let totalCredits = 0;

    const gradeMap = { O:10, A:9, B:8, C:7, D:6, E:5, F:0 };

    for (let i = 1; i <= n; i++) {
        let grade = document.getElementById(`grade${i}`).value;
        let credits = parseFloat(document.getElementById(`credits${i}`).value);

        if (!grade || isNaN(credits)) {
            alert("Please fill all fields");
            return;
        }

        if (grade === "F") {
            alert(`You failed in subject ${i}. Supplementary required.`);
            return;
        }

        totalWeighted += gradeMap[grade] * credits;
        totalCredits += credits;
    }

    let currentCGPA = totalWeighted / totalCredits;

    let prevCGPA = parseFloat(document.getElementById("prevCGPA").value) || 0;
    let prevCredits = parseFloat(document.getElementById("prevCredits").value) || 0;

    let cumulativeCGPA = (prevCGPA * prevCredits + currentCGPA * totalCredits) /
                         (prevCredits + totalCredits);

    document.getElementById("result").innerHTML = `
        Current Semester CGPA: ${currentCGPA}<br>
        Cumulative CGPA: ${cumulativeCGPA}
    `;
}
</script>

</body>
</html>

